(function(){const a=window.prompt("Share with 'followers' or 'party'","followers"),b=document.createElement("div"),c="party"===a?"green":"red";b.style.cssText=`position: fixed; top: 0px; left: 0px; z-index: 9999; color: white; background: ${c}; padding: 2px`,document.body.appendChild(b);const d=document.querySelectorAll(".share").length?{captchaId:"#captcha-popup",loadingIndicatorId:"#infinite-scroll",inventoryTagClass:".inventory-tag",shareButtonClass:".share",shareModalId:"#share-popup",followerShareClass:`.pm-${a}-share-link`}:{captchaId:"#captcha-popup",loadingIndicatorId:"#infinite-scroll",inventoryTagClass:".tile__inventory-tag",shareButtonClass:".social-action-bar__share",shareModalId:".share-modal",followerShareClass:`[data-et-name=share_poshmark${"party"===a?"_poshparty":""}]`},e=a=>a&&null!==a.offsetParent||null!==getComputedStyle(a).display,f=()=>document.querySelector(d.captchaId),g=()=>document.body.offsetHeight,h=()=>{b.innerText="Scrolling...",window.scrollTo(0,g());},i=()=>document.querySelectorAll(".tile"),j=()=>i().filter(a=>null===a.querySelector(d.inventoryTagClass)),k=a=>a.querySelector(d.shareButtonClass),l=async a=>{for(;null===document.querySelector(a);)await new Promise(a=>requestAnimationFrame(a));return document.querySelector(a);},m=()=>{b.innerText="Starting to share items.";const a=j().reverse();let c=0;const g=async()=>{var h=Math.floor;const i=e(f());if(!i){b.innerText=`Item ${c+1} of ${a.length}, sharing...`;const e=a[c];c+=1;const f=k(e);f.click(),await l(d.shareModalId);const g=await l(d.followerShareClass);g.click();}if(c<a.length){const d=h(Math.random()*h(4))+1;b.innerText=`Item ${c} of ${a.length}, ${i?"captcha present":"shared"}, waiting ${d} seconds...`,window.setTimeout(g,1e3*d);}else window.alert("All Done Meri Jaan! I love you!"),b.remove();};g();},n=()=>!!document.querySelector(d.loadingIndicatorId)?.offsetParent;let o;const p=window.setInterval(()=>{if(!n()){b.innerText="Checking Height...";const a=g();a===o?(window.clearInterval(p),m()):(o=a,h());}},1e3);})();
